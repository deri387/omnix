!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["react-mic"]=t(require("react")):e["react-mic"]=t(e.react)}(self,(function(e){return(()=>{var t={703:(e,t,n)=>{"use strict";var r=n(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},974:(e,t,n)=>{var r,o;window,e.exports=(r=n(697),o=n(156),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";n.r(t);var r,o,i,a=n(1),c=n.n(a),u=n(0),s=new(window.AudioContext||window.webkitAudioContext),l=s.createAnalyser(),f=function(){return s},p=function(){return l},d=function(){l=s.createAnalyser()};function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y,h,b,m,g,S,w,C,R=[];navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var x,O=function(){function e(t,n,a,c,u,s){var l,d,v=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d=function(){if(y=Date.now(),i){if(o&&"suspended"===o.state&&o.resume(),i&&"paused"===i.state)return void i.resume();o&&i&&"inactive"===i.state&&(i.start(10),o.createMediaStreamSource(h).connect(r),m&&m())}else navigator.mediaDevices?(console.log("getUserMedia supported."),navigator.mediaDevices.getUserMedia(C).then((function(e){h=e,i=MediaRecorder.isTypeSupported(b.mimeType)?new MediaRecorder(e,b):new MediaRecorder(e),m&&m(),i.onstop=v.onStop,i.ondataavailable=function(e){R.push(e.data),w&&w(e.data)},(o=f()).resume().then((function(){r=p(),i.start(10),o.createMediaStreamSource(h).connect(r)}))}))):alert("Your browser does not support audio recording")},(l="startRecording")in this?Object.defineProperty(this,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):this[l]=d;var x=s.echoCancellation,O=s.autoGainControl,T=s.noiseSuppression,P=s.channelCount;m=t,g=n,S=a,w=c,b=u,C={audio:{echoCancellation:x,autoGainControl:O,noiseSuppression:T,channelCount:P},video:!1}}var t,n;return t=e,(n=[{key:"stopRecording",value:function(){i&&"inactive"!==i.state&&(i.stop(),h.getAudioTracks().forEach((function(e){e.stop()})),i=null,d())}},{key:"onStop",value:function(){var e=new Blob(R,{type:b.mimeType});R=[];var t={blob:e,startTime:y,stopTime:Date.now(),options:b,blobURL:window.URL.createObjectURL(e)};g&&g(t),S&&S(t)}}])&&v(t.prototype,n),e}(),T=function(e){var t=f(),n=p();if(void 0===x){var r=t.createMediaElementSource(e);r.connect(n),x=r}n.connect(t.destination)},P={visualizeSineWave:function(e,t,n,r,o,i){var a=p(),c=a.fftSize,u=new Uint8Array(c);e.clearRect(0,0,n,r),function s(){requestAnimationFrame(s),(a=p()).getByteTimeDomainData(u),e.fillStyle=o,e.fillRect(0,0,n,r),e.lineWidth=2,e.strokeStyle=i,e.beginPath();for(var l=1*n/c,f=0,d=0;d<c;d++){var v=u[d]/128*r/2;0===d?e.moveTo(f,v):e.lineTo(f,v),f+=l}e.lineTo(t.width,t.height/2),e.stroke()}()},visualizeFrequencyBars:function(e,t,n,r,o,i){var a=this,c=p();c.fftSize=256;var u=c.frequencyBinCount,s=new Uint8Array(u);e.clearRect(0,0,n,r),function t(){requestAnimationFrame(t),(c=p()).getByteFrequencyData(s),e.fillStyle=o,e.fillRect(0,0,n,r);for(var l,f=n/u*2.5,d=0,v=0;v<u;v++)l=s[v],a.hexToRgb(i),e.fillStyle=i,e.fillRect(d,r-l/2,f,l/2),d+=f+1}()},visualizeFrequencyCircles:function(e,t,n,r,o,i){var a=p();a.fftSize=32;var c=a.frequencyBinCount,u=new Uint8Array(c);e.clearRect(0,0,n,r),function t(){requestAnimationFrame(t),(a=p()).getByteFrequencyData(u);for(var s=new Uint8Array(c/3),l=0;l<c;l+=3){for(var f=0,d=0;d<3;d++)f+=u[l+d];s[l/3]=f/3}e.clearRect(0,0,n,r),e.beginPath(),e.arc(n/2,r/2,Math.min(r,n)/2,0,2*Math.PI),e.fillStyle=o,e.fill();var v=Math.min(r,n)/2/s.length;e.strokeStyle=i;for(var y=0;y<s.length;y++){e.beginPath();var h=v*y+v*(s[y]/128);e.arc(n/2,r/2,h,0,2*Math.PI),e.stroke()}}()},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}};function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(e){var n,r,o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,r=M(t).call(this,e),n=!r||"object"!==j(r)&&"function"!=typeof r?_(this):r,a=function(){var e=n.props,t=e.backgroundColor,r=e.strokeColor,o=e.width,i=e.height,a=e.visualSetting,c=n.state,u=c.canvas,s=c.canvasCtx;"sinewave"===a?P.visualizeSineWave(s,u,o,i,t,r):"frequencyBars"===a?P.visualizeFrequencyBars(s,u,o,i,t,r):"frequencyCircles"===a&&P.visualizeFrequencyCircles(s,u,o,i,t,r)},(i="visualize")in(o=_(n))?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,n.visualizerRef=c.a.createRef(),n.state={microphoneRecorder:null,canvas:null,canvasCtx:null},n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.record,r=t.onStop,o=this.state.microphoneRecorder;e.record!==n&&(n?o&&o.startRecording():o&&(o.stopRecording(r),this.clear()))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.onSave,r=t.onStop,o=t.onStart,i=t.onData,a=t.audioElem,c=t.audioBitsPerSecond,u=t.echoCancellation,s=t.autoGainControl,l=t.noiseSuppression,f=(t.channelCount,t.mimeType),p=this.visualizerRef.current,d=p.getContext("2d"),v={audioBitsPerSecond:c,mimeType:f},y={echoCancellation:u,autoGainControl:s,noiseSuppression:l};a?(T(a),this.setState({canvas:p,canvasCtx:d},(function(){e.visualize()}))):this.setState({microphoneRecorder:new O(o,r,n,i,v,y),canvas:p,canvasCtx:d},(function(){e.visualize()}))}},{key:"clear",value:function(){var e=this.props,t=e.width,n=e.height;this.state.canvasCtx.clearRect(0,0,t,n)}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height;return c.a.createElement("canvas",{ref:this.visualizerRef,height:n,width:t,className:this.props.className})}}])&&k(n.prototype,r),t}(a.Component);z.propTypes={backgroundColor:u.string,strokeColor:u.string,className:u.string,audioBitsPerSecond:u.number,mimeType:u.string,height:u.number,record:u.bool.isRequired,onStop:u.func,onData:u.func,onSave:u.func},z.defaultProps={backgroundColor:"rgba(255, 255, 255, 0.5)",strokeColor:"#000000",className:"visualizer",audioBitsPerSecond:128e3,mimeType:"audio/webm;codecs=opus",record:!1,width:640,height:100,visualSetting:"sinewave",echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1,channelCount:2},n.d(t,"ReactMic",(function(){return z}))}]))},156:t=>{"use strict";t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";r.d(o,{default:()=>e});const e=r(974).ReactMic})(),o.default})()}));